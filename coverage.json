{
  "kind": "coverage_report",
  "version": "1.0",
  "generatedAt": "2026-02-27T10:46:20.326Z",
  "sources": {
    "buildRequest": true,
    "implementationPlan": true
  },
  "requirements": {
    "total": 7,
    "implemented": 6,
    "items": [
      {
        "id": "REQ-83",
        "summary": "Extend the Motoko backend actor in backend/main.mo to support a user-managed service data model separate from the existing static catalog. Add a new `ManagedService` record type with fields: id (Text), name (Text), shortDescription (Text), detailedDescription (Text), category (Text), pricingType (variant { Fixed; Hourly; Custom }), basePrice (Nat), deliveryTime (Text), imageUrl (Text), features ([Text]), packages ([ServicePackage]), addOns ([ServiceAddOn]), customRequirementLabel (Text), quantityEnabled (Bool), isVisible (Bool), sortOrder (Nat), createdAt (Int), updatedAt (Int), isUserCreated (Bool). Add a `ServicePackage` record type with: name (Text), price (Nat), deliveryTime (Text), features ([Text]). Add a `ServiceAddOn` record type with: name (Text), price (Nat), description (Text). Implement CRUD update functions: `createManagedService`, `updateManagedService`, `deleteManagedService` (only allow deletion when `isUserCreated` is true), `duplicateManagedService`, `reorderManagedServices` (accepts an ordered list of ids), and `getManagedServices`. All operations must validate required fields (name non-empty, basePrice >= 0) and return a Result type. Existing service data and backend functions must remain unchanged.",
        "status": "unknown",
        "plannedFiles": [],
        "matchedFiles": []
      },
      {
        "id": "REQ-84",
        "summary": "Add React Query mutation and query hooks for the new managed-service backend functions to frontend/src/hooks/useQueries.ts. Expose: `useGetManagedServices` (query), `useCreateManagedService` (mutation, invalidates managed-services cache on success), `useUpdateManagedService` (mutation, invalidates on success), `useDeleteManagedService` (mutation, invalidates on success), `useDuplicateManagedService` (mutation, invalidates on success), and `useReorderManagedServices` (mutation, invalidates on success). Each hook must follow the existing pattern in useQueries.ts — check actor availability, wrap the actor call, and handle errors with toast notifications.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/hooks/useQueries.ts"
        ],
        "matchedFiles": [
          "frontend/src/hooks/useQueries.ts"
        ]
      },
      {
        "id": "REQ-85",
        "summary": "Create a new page at route /service-management (frontend/src/pages/ServiceManagementPage.tsx), accessible from the sidebar navigation under a 'Services' group. This page is the Agency Services Management hub and must: (1) display a prominent 'Add New Service' button at the top that opens a create-service dialog; (2) fetch and render all user-created managed services using `useGetManagedServices`; (3) render each managed service as a card showing the service name, category, pricing type, base price (INR formatted), delivery time, visibility badge (Active/Hidden), and action buttons (Edit, Duplicate, Delete, Preview, drag handle); (4) support drag-and-drop reordering of service cards using a library-agnostic approach (mouse/touch event handlers or a lightweight DnD utility) — on drop, call `useReorderManagedServices` with the new ordered id list; (5) include a visibility toggle on each card that calls `useUpdateManagedService` to flip `isVisible`; (6) show a loading skeleton while data is fetching and an empty-state illustration with a call-to-action when no services exist; (7) be fully responsive and mobile-friendly using the existing dark-gold Tailwind theme (charcoal backgrounds, gold accents, rounded-xl cards). Register the route /service-management in App.tsx nested under the authenticated shell route.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/pages/ServiceManagementPage.tsx",
          "frontend/src/App.tsx",
          "frontend/src/components/layout/SidebarNav.tsx"
        ],
        "matchedFiles": [
          "frontend/src/pages/ServiceManagementPage.tsx",
          "frontend/src/App.tsx"
        ]
      },
      {
        "id": "REQ-86",
        "summary": "Create a multi-step Create/Edit Service dialog (frontend/src/components/services/ManagedServiceFormDialog.tsx) used by both the 'Add New Service' button and the 'Edit' action on ServiceManagementPage. The dialog must have the following tabs/steps: (1) Basic Info — service name (required), short description, detailed description, category (dropdown: SEO, Web Design, Ads, Branding, AI Automation, App Development, Digital Marketing, Custom), pricing type (radio: Fixed / Hourly / Custom Quote), base price (INR number input, shown only for Fixed/Hourly), delivery time (text), image URL or icon picker; (2) Features — a dynamic bullet-point list where users can add, edit, and remove feature items; (3) Packages — three expandable sections for Basic, Standard, and Premium packages, each with its own name, price (INR), delivery time, and features list; optional add-ons section below with add/remove rows (name, price, description); (4) Settings — custom requirement label (text, e.g. 'Describe your project'), quantity selector toggle (on/off), visibility toggle (on/off). On submit, call `useCreateManagedService` (for new) or `useUpdateManagedService` (for edit) with the form data. Show inline validation errors for required fields. Show a loading spinner on the submit button while the mutation is in-flight. Close the dialog and show a success toast on completion.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/services/ManagedServiceFormDialog.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/services/ManagedServiceFormDialog.tsx"
        ]
      },
      {
        "id": "REQ-87",
        "summary": "Implement the Duplicate and Delete actions for managed services on ServiceManagementPage. For Duplicate: clicking the Duplicate button on a service card calls `useDuplicateManagedService` with the service id, appends ' (Copy)' to the duplicated service's name, and adds it to the list immediately via cache invalidation. For Delete: clicking the Delete button opens a confirmation dialog (reuse or extend the existing ServiceDeleteDialog pattern) that warns the user the action is permanent; on confirmation, calls `useDeleteManagedService`; if the backend returns an error because `isUserCreated` is false, display a toast error: 'This service is part of the original catalog and cannot be deleted.' On successful deletion, remove the card from the list via cache invalidation.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/pages/ServiceManagementPage.tsx"
        ],
        "matchedFiles": [
          "frontend/src/pages/ServiceManagementPage.tsx"
        ]
      },
      {
        "id": "REQ-88",
        "summary": "Implement a Service Preview modal (frontend/src/components/services/ManagedServicePreviewModal.tsx) that renders a read-only, client-facing view of a managed service before publishing. The preview must display: service name, short and detailed description, category badge, pricing type and base price (INR formatted), delivery time, features bullet list, all package cards (Basic/Standard/Premium) with their prices and features, and available add-ons. Include a dynamic price calculator section that shows the base price and recalculates the total in real time as the user selects add-ons (checkboxes) and adjusts quantity (if `quantityEnabled` is true). Display the custom requirement label as a disabled text area placeholder. The modal must use the existing dark-gold Tailwind theme and be fully responsive. A 'Close' button must dismiss the modal.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/components/services/ManagedServicePreviewModal.tsx",
          "frontend/src/pages/ServiceManagementPage.tsx"
        ],
        "matchedFiles": [
          "frontend/src/components/services/ManagedServicePreviewModal.tsx",
          "frontend/src/pages/ServiceManagementPage.tsx"
        ]
      },
      {
        "id": "REQ-89",
        "summary": "Add a 'Service Management' link to the sidebar navigation (frontend/src/components/layout/SidebarNav.tsx) under a 'Services' group or adjacent to the existing Services link. The link must point to /service-management and be visible to all users (no role gate). Also add a simple analytics sub-section at the bottom of ServiceManagementPage that displays, for each managed service: a 'Views' count and a 'Purchases' count, read from localStorage counters that are incremented (a) when the preview modal is opened (views) and (b) when a managed service's 'Buy Now' action is triggered (purchases). Display these counts as small stat badges on each service card.",
        "status": "implemented",
        "plannedFiles": [
          "frontend/src/pages/ServiceManagementPage.tsx",
          "frontend/src/components/layout/SidebarNav.tsx"
        ],
        "matchedFiles": [
          "frontend/src/pages/ServiceManagementPage.tsx"
        ]
      }
    ]
  },
  "changedFiles": [
    "backend/main.mo",
    "build-request.json",
    "feature_evidence.json",
    "frontend-file-summaries.txt",
    "frontend-implementation-plan.json",
    "frontend/src/App.tsx",
    "frontend/src/backend.d.ts",
    "frontend/src/backend.ts",
    "frontend/src/components/leads/AutomationLogsPanel.tsx",
    "frontend/src/components/leads/BulkStatusChangeDialog.tsx",
    "frontend/src/components/leads/EditPaymentLinkDialog.tsx",
    "frontend/src/components/leads/LeadDetailPanel.tsx",
    "frontend/src/components/leads/LeadExportToolbar.tsx",
    "frontend/src/components/leads/LeadTableView.tsx",
    "frontend/src/components/leads/PaymentLinkDialog.tsx",
    "frontend/src/components/services/ManagedServiceFormDialog.tsx",
    "frontend/src/components/services/ManagedServicePreviewModal.tsx",
    "frontend/src/components/settings/RazorpayConfigPanel.tsx",
    "frontend/src/declarations/backend.did.d.ts",
    "frontend/src/declarations/backend.did.js",
    "frontend/src/hooks/useQueries.ts",
    "frontend/src/pages/CRMPage.tsx",
    "frontend/src/pages/CheckoutPage.tsx",
    "frontend/src/pages/DataExportCenterPage.tsx",
    "frontend/src/pages/InvoiceHistoryPage.tsx",
    "frontend/src/pages/LeadsPage.tsx",
    "frontend/src/pages/NotificationsPage.tsx",
    "frontend/src/pages/PaymentsPage.tsx",
    "frontend/src/pages/ServiceManagementPage.tsx",
    "frontend/src/pages/WhatsAppLogsPage.tsx",
    "frontend/src/utils/exportUtils.ts",
    "project_state.json",
    "scratch/component-selection.json",
    "spec.md",
    "spec_vs_diff_report.json"
  ]
}