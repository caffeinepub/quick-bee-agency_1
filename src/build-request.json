{
  "kind": "build_request",
  "title": "Add editable payment link and QR code options in Services",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Add UI controls in the ServicesPage to allow editing payment links and QR codes for each service item",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "make editable options to add links & QR codes to recieve payments in payments option & in services"
        ]
      },
      "acceptanceCriteria": [
        "Each service card or row displays an action button to edit payment information",
        "Clicking the edit action opens a dialog similar to EditPaymentLinkDialog",
        "The dialog allows users to input/update payment link URLs",
        "The dialog supports QR code generation via backend API or custom image upload"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Extend the Service data model in backend to include paymentLinkUrl and qrCodeDataUrl fields",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "make editable options to add links & QR codes to recieve payments in payments option & in services"
        ]
      },
      "acceptanceCriteria": [
        "Service type includes optional paymentLinkUrl field of type ?Text",
        "Service type includes optional qrCodeDataUrl field of type ?Text",
        "Update and create service functions handle these new fields",
        "Existing services are migrated to include null values for these fields"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Create React Query mutations for updating service payment links and QR codes",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "make editable options to add links & QR codes to recieve payments in payments option & in services"
        ]
      },
      "acceptanceCriteria": [
        "useUpdateServicePaymentLink mutation calls backend to update paymentLinkUrl",
        "useUpdateServiceQRCode mutation calls backend to update qrCodeDataUrl",
        "Mutations invalidate the services query cache on success",
        "Error handling displays appropriate feedback to users"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Update ServiceDetailPage to display payment link and QR code if available",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "make editable options to add links & QR codes to recieve payments in payments option & in services"
        ]
      },
      "acceptanceCriteria": [
        "Service detail page shows payment link URL if configured",
        "Service detail page displays QR code image if configured",
        "Admin users see an edit button to modify payment information",
        "Copy and download options are available for payment links and QR codes"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Ensure PaymentsPage displays editable payment links with the existing EditPaymentLinkDialog functionality",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "make editable options to add links & QR codes to recieve payments in payments option & in services"
        ]
      },
      "acceptanceCriteria": [
        "Payment links in PaymentsPage show an edit icon or button",
        "Clicking edit opens EditPaymentLinkDialog with current values",
        "Users can update payment link URL and QR code",
        "Changes persist to backend and refresh the payment links list"
      ]
    }
  ],
  "constraints": [
    "Reuse the existing EditPaymentLinkDialog component pattern for consistency",
    "Follow the established Service type structure in backend/main.mo",
    "Maintain the single-actor architecture for all backend logic"
  ],
  "nonGoals": [
    "Integrating third-party payment gateway APIs beyond existing Razorpay configuration",
    "Automatic QR code generation without user interaction",
    "Bulk editing of payment links across multiple services"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}